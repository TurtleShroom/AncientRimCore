<?xml version="1.0" encoding="utf-8"?>

<!-- THERE CAN ONLY BE ONE -->
<Patch>
  <Operation Class="PatchOperationConditional">
    <!-- DO THE GENTILES KNOW? -->
    <xpath>/Defs/ThingDef[defName="VFEC_Javelin"]</xpath>
    <!-- If they do, SHUT IT DOWN. -->
    <match Class="PatchOperationRemove">
      <success>Always</success>
      <xpath>/Defs/ThingDef[defName="VFEC_Javelin"]</xpath>
    </match>
    <!-- If the first XPATH does not exist, the original code stands. All according to plan. -->
  </Operation>
  
  <Operation Class="PatchOperationConditional">
    <!-- Does this exist? -->
    <xpath>/Defs/ThingDef[defName="VFEC_Apparel_LegionnaireArmor"]</xpath>
    <!-- If it does, LET'S FASTING GOOOOOOOOOO!!! -->
    <match Class="PatchOperationSequence">
      <success>Always</success>
      <operations>
        <li Class="PatchOperationRemove">
          <success>Always</success>
          <xpath>/Defs/ResearchProjectDef[defName="VFEC_BronzeWorking"]</xpath>
        </li>
        <li Class="PatchOperationRemove">
          <success>Always</success>
          <xpath>/Defs/RecipeDef[defName="VFEC_Make_Bronze"]</xpath>
        </li>
        <li Class="PatchOperationReplace">
          <success>Always</success>
          <xpath>/Defs/TerrainDef[defName="VFEC_BronzeTile"]/label</xpath>
          <value>
            <label>bronze sterile tile</label>
          </value>
        </li>
        <li Class="PatchOperationReplace">
          <success>Always</success>
          <xpath>/Defs/TerrainDef[defName="VFEC_BronzeTile"]/costList</xpath>
          <value>
            <costList>
              <AR_Bronze>25</AR_Bronze>
              <Silver>2</Silver>
            </costList>
          </value>
        </li>
        <li Class="PatchOperationRemove">
          <success>Always</success>
          <xpath>/Defs/ThingDef[defName="VFEC_Bronze"]</xpath>
        </li>
      </operations>
    </match>
  </Operation>
  
	<Operation Class="PatchOperationConditional">
		<!-- Does this exist? -->
		<xpath>/Defs/RecipeDef[defName="Make_FromRubbish_VFEC_Bronze_WVC"]</xpath>
		<!-- If it does, do this replacement. -->
		<match Class="PatchOperationReplace">
			<success>Always</success>
			<xpath>/Defs/RecipeDef[defName="Make_FromRubbish_VFEC_Bronze_WVC"]/products</xpath>
			<value>
				<products Inherit="False">
					<AR_Bronze>20</AR_Bronze>
				</products>
			</value>
		</match>
	<!-- If the first XPATH does not exist, the original code stands. -->
	</Operation>

	<Operation Class="PatchOperationConditional">
	<!-- Does this exist? -->
	<xpath>/Defs/RecipeDef[defName="Make_FromRubbish_VFEC_Bronze_WVC"]</xpath>
	<!-- If it does, add this. -->
	<match Class="PatchOperationAdd">
	<success>Always</success>
	<xpath>/Defs</xpath>
		<value>
			<RecipeDef MayRequire="mlie.ancientrimcore" ParentName="GirlyWorkRecipeAbstractResources_WVC">
				<defName>TSP_AR_WVC_SpawnIron</defName>
				<label>Convert to Iron (AR)</label>
				<products Inherit="False">
					<AR_Iron>30</AR_Iron>
				</products>
			</RecipeDef>
			<RecipeDef MayRequire="mlie.ancientrimcore" ParentName="GirlyWorkRecipeAbstractResources_WVC">
				<defName>TSP_AR_WVC_SpawnCopper</defName>
				<label>Convert to Copper (AR)</label>
				<products Inherit="False">
					<AR_Copper>30</AR_Copper>
				</products>
			</RecipeDef>
		</value>
	</match>
    <!-- If the first XPATH does not exist, the original code stands. -->
  </Operation>
</Patch>